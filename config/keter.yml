# After you've edited this file, remove the following line to allow
# `yesod keter` to build your bundle.
user-edited: true

# A Keter app is netposed of 1 or more stanzas. The main stanza will define our
# web application. See the Keter documentation for more information on
# available stanzas.

stanzas:

  # Your Yesod application.
  - type: webapp

    exec: ../dist/bin/tyche

    env:
        APPROOT: "https://www.ambiguityaversion.com"
        IP_FROM_HEADER: "true"

    args: []

    hosts:
      - ambiguityaversion.com
      - ambiguityaversion.com:4321
      - www.ambiguityaversion.com
      - www.ambiguityaversion.com:4321
      - localhost:4321

    ssl: true

    # Enable to force Keter to redirect to https
    # Can be added to any stanza
    requires-secure: false

  # Static files.
  - type: static-files
    hosts:
      - static.ambiguityaversion.com
    root: ../static

    # Uncomment to turn on directory listings.
    # directory-listing: true

  # Redirect plain domain name to www.
  - type: redirect

    hosts:
      - ambiguityaversion.com
    actions:
      - host: www.ambiguityaversion.com
        # secure: false
        # port: 80

    # Uncomment to switch to a non-permanent redirect.
    # status: 303

# Use the following to automatically copy your bundle upon creation via `yesod
# keter`. Uses `scp` internally, so you can set it to a remote destination
copy-to: wale@104.198.183.127:/opt/keter/incoming

# You can pass arguments to `scp` used above. This example limits bandwidth to
# 1024 Kbit/s and uses port 2222 instead of the default 22
# copy-to-args:
#   - "-l 1024"
#   - "-P 2222"

# If you would like to have Keter automatically create a PostgreSQL database
# and set appropriate environment variables for it to be discovered, uncomment
# the following line.
plugins:
   postgres: true
